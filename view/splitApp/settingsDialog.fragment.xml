<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:commons="sap.ui.commons"
    xmlns:f="sap.ui.layout.form"
    xmlns:l="sap.ui.layout">
    <Dialog id="dialogSettings" title="{i18n>settings}" stretch="true" afterClose="onClose">
        <content>
            <IconTabBar expandable="false" select="_onPopupSelect" upperCase='true'>
                <items>
                    <IconTabFilter key="tabUser" text="{i18n>USER}">
                        <Panel headerText="Email" expandable="true" expanded="true" backgroundDesign="Transparent">
                            <VBox>
                                <Label text="{user>/userInfo/email}"/>
                                <Input id="inputNewEmail" placeholder="{i18n>newEmail}" type="Email"/>
                                <Button text="{i18n>change}" width="100%" press="onChangeEmailPress"/>
                                <commons:TextView id="textViewChangeEmail"/>
                            </VBox>
                        </Panel>
                        <Panel headerText="{i18n>password}" expandable="true" expanded="true" backgroundDesign="Transparent">
                            <VBox>
                                <Input id="inputOldPassword" placeholder="{i18n>oldPassword}" type="Password"/>
                                <Input id="inputNewPassword" placeholder="{i18n>newPassword}" type="Password"/>
                                <Button text="{i18n>change}" width="100%" press="onChangePasswordPress"/>
                                <commons:TextView id="textViewChangePassword"/>
                            </VBox>
                        </Panel>
                        <Panel headerText="Обучение" expandable="true" expanded="false" backgroundDesign="Transparent">
                            <Button text="Пройти обучение заново" width="100%" press="tutoralStart"/>
                        </Panel>

                    </IconTabFilter>
                    <IconTabFilter key="tabDevices" text="{i18n>DEVICES}">
                        <List id="tableDevices" items="{user>/deviceInfo}" mode="Delete" delete="onDeleteDevice" noDataText="{i18n>noMobileDevices}">
                            <items>
                                <ObjectListItem title="{user>deviceName}" icon="img/AndroidRobot.png">
                                    <firstStatus>
                                        <ObjectStatus text="{user>lastSync}"/>
                                    </firstStatus>
                                    <attributes>
                                        <ObjectAttribute text="{user>osName} {user>osVersion}"/>
                                    </attributes>
                                </ObjectListItem>
                            </items>
                        </List>
                    </IconTabFilter>
                    <IconTabFilter id="tabPremium" text="{i18n>premium}">

                        <f:SimpleForm
                            editable="true"
                            layout="ResponsiveGridLayout"
                            labelSpanXL="3"
                            labelSpanL="3"
                            labelSpanM="3"
                            labelSpanS="12"
                            adjustLabelSpan="false"
                            emptySpanXL="4"
                            emptySpanL="4"
                            emptySpanM="4"
                            emptySpanS="0"
                            columnsXL="1"
                            columnsL="1"
                            columnsM="1"
                            singleContainerFullSize="false">
                            <f:content>
                                <Label text="{i18n>premiumPeriodUntil}"/>
                                <Text text="{user>/premiumInfo/until}"/>
                                <!-- Раскомменить позже, когда продолжу работы в этом направлении -->

                                <!-- <Label text="Продлить подписку"/> <SegmentedButton items='{orders>/types}' class='sapUiSizeCompact'> <items> <SegmentedButtonItem
                                text="{orders>name}" key="{orders>id}"/> </items> <layoutData> <l:GridData span="XL2 L2 M2 S2"/> </layoutData> </SegmentedButton> -->
                            </f:content>
                        </f:SimpleForm>
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </content>
        <beginButton>
            <Button text="{i18n>close}" press="onClose"/>
        </beginButton>
    </Dialog>
</core:FragmentDefinition>
