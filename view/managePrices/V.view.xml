<mvc:View
    controllerName="yelton.controller.managePrices.C"
    xmlns:l="sap.ui.layout"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page>
        <headerContent>
            <ToolbarSpacer/>
            <Button
                id="buttonResetFilter"
                icon="sap-icon://decline"
                press="pricesFilterDialog.reset"
                tooltip="Сбросить фильтр"
                visible="false"/>
            <Button icon="sap-icon://filter" press="pricesFilterDialog.show" tooltip="Фильтр"/>
            <SearchField liveChange="onFilterLiveSearch" width="30%" showSearchButton="false"/>
        </headerContent>
        <content>
            <Table
                id="tablePrices"
                mode="SingleSelectMaster"
                growing="true"
                growingThreshold="50"
                growingScrollToLoad="true"
                items="{/}"
                fixedLayout="false"
                itemPress="pricesEditDialog.showEditDialog">
                <columns>
                    <Column/>
                    <Column/>
                    <Column/>
                </columns>
                <items>
                    <ColumnListItem type="Active">
                        <cells>
                            <ObjectIdentifier title="{productName}" text="{categoryName}"/>
                            <ObjectIdentifier title="{price} {currencyShortName}" text="{amount} {unitShortName}"/>
                            <ObjectIdentifier
                                title="{storeName}"
                                text="
                                {
                                    path: 'date',
                                    type: 'sap.ui.model.type.Date',
                                    formatOptions: {
                                        style: 'long',
                                        source: {
                                            pattern: 'dd.MM.yyyy'
                                        }
                                    }
                                }"/>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
        <footer>
            <Toolbar>
                <ToolbarSpacer/>
                <Button icon="sap-icon://add" text="Добавить" press="pricesEditDialog.showCreateDialog" tooltip="Добавить новую покупку"/>
            </Toolbar>
        </footer>
    </Page>
</mvc:View>
